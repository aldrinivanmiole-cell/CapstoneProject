{% extends 'admin_base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Assignments • {{ class_.name }}{% if class_.section %} - {{ class_.section }}{% endif %}</h3>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" href="{{ url_for('admin_classes') }}">Back to Classes</a>
      <a class="btn btn-primary" href="{{ url_for('create_assignment', class_id=class_.id) }}">Create Assignment</a>
    </div>
  </div>

  <div class="card p-3">
    <div class="list-group">
      {% for a in assignments %}
      <div class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <div class="fw-bold">{{ a.title }}</div>
          <div class="text-muted small">Created: {{ a.created_at.strftime('%Y-%m-%d') if a.created_at }} • Questions: {{ a.questions|length }}</div>
        </div>
        <div class="d-flex gap-2">
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('view_assignment', assignment_id=a.id) }}">View</a>
          <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('edit_assignment', assignment_id=a.id) }}">Edit</a>
          <a class="btn btn-sm btn-outline-info" href="{{ url_for('assignment_monitor', assignment_id=a.id) }}">Monitor</a>
          <a class="btn btn-sm btn-outline-success" href="{{ url_for('assignment_results', assignment_id=a.id) }}">Results</a>
          <a class="btn btn-sm btn-outline-danger" href="{{ url_for('delete_assignment', assignment_id=a.id) }}" onclick="return confirm('Delete this assignment?');">Delete</a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
